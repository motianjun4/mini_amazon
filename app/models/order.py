from asyncio.windows_events import NULL
from unicodedata import name
from flask import current_app as app
'''
CREATE TABLE IF NOT EXISTS public.order
(
    id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    uid integer NOT NULL,
    address varchar(255) NOT NULL,
    date integer NOT NULL,
    amount decimal(14, 2) NOT NULL,
    status varchar(255) NOT NULL,
    CONSTRAINT order_pkey PRIMARY KEY (id, uid)
);
'''

class Order:
    def __init__(self, id, uid, address, date, amount, status):
        self.id = id
        self.uid = uid
        self.address = address
        self.date = date
        self.amount = amount
        self.status = status

    @staticmethod
    def get_all_by_uid(uid):
        rows = app.db.execute('''
SELECT id, uid, address, date, amount, status
FROM Order
WHERE uid = :uid
''',
                             uid=uid)
        return [Order(*row) for row in rows]

    



